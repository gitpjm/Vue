<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>this</title>
</head>
<body>
<script>
    var name = "The Window";
    var object = {
        name : "My Object",
        getNameFunc : function(){
            return function(){
                return this.name;
            };
        }
    };
    //alert(object.getNameFunc()());


    var name = "The Window";
    var object = {
        name : "My Object",
        getNameFunc : function(){
            var that = this;
            return function(){
                return that.name;
            };
        }
    };
    //alert(object.getNameFunc()());

    var name = "The Window";
    var object = {
        name : "My Object",
        getNameFunc : function(){
            return (function(a){
                return a.name;
            })(this);
        }
    };
    //alert(object.getNameFunc());

    var name = "The Window";
    var object = {
        name : "My Object",
        getNameFunc : function(){
            return function(){
                return this.name;
            }.call(this); // apply
        }
    };
    //alert(object.getNameFunc().bind(object)());
    //alert(object.getNameFunc());

    function Bloomer() {
        this.petalCount = Math.ceil(Math.random() * 12) + 1;
    }

    // 1秒后调用declare函数
    Bloomer.prototype.bloom = function() {
        window.setTimeout(this.declare.bind(this), 1000); //如果不绑定 declare 中的this指向window
    };

    Bloomer.prototype.declare = function() {
        console.log('有 ' + this.petalCount + ' 朵花瓣!');
    };
    var bloomer = new Bloomer()
    //bloomer.bloom();



</script>
</body>
</html>